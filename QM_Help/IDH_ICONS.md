# 图标

“图标”对话框用于为[工具栏、菜单](IDH_MENUICONS.html)、[QM 项目](IDH_ITEMS.html)和快捷方式查找或创建图标。

## 左侧 - 图标浏览器
用于查找图标并分配给菜单项等。

- **浏览**：打开图标文件。可在“打开图标文件”对话框中选择文件并查看图标而不关闭对话框。小按钮显示最近使用文件菜单。选择文件并点击“确定”可将其添加到菜单或置顶。
- **操作**：显示图标操作菜单，大多数操作使用当前图标。当前图标显示在对话框中，其文件名和索引显示在标题栏。
  - **设置图标...**：将图标分配给菜单/工具栏项、当前 QM 项目或与当前 QM 项目类型相同的项目等。对于菜单/工具栏项，会将图标文件路径插入到编辑器文本的光标所在行。
  - **重置**：分配默认图标。
  - **编辑**：在右侧图标编辑器中打开图标。若图标来自库（dll、exe 等）或不兼容（见下文），则作为新图标打开。
  - **在外部编辑器中编辑**：在“选项 -> 工具”中指定的程序中打开图标文件。若图标来自库，需先保存为 ico 文件。
  - **另存为 ico 文件**：若图标来自库，保存为 ico 文件。
  - **复制路径**：将图标路径存储到剪贴板。
  - **粘贴路径**：打开剪贴板中作为文本的图标文件路径。
  - **设置默认保存文件夹**：选择“另存为”对话框的起始文件夹，不影响“浏览”按钮。
  - **刷新图标**：重新加载 QM 项目和通用图标的更改。图标会被缓存以提升性能。
  - **图像列表编辑器**：创建可用于对话框中各种控件的图像列表。

## 右侧 - 图标编辑器
用于为菜单、工具栏和 QM 项目创建简单图标。

- **保存**：创建或编辑图标后，点击“保存”或“另存为”，然后通过“操作”菜单分配图标。QM 不会自动保存图标或在关闭编辑器时提示保存。
- **图标格式**：编辑器保存为 *.ico 文件，包含一个小型图标（16x16 像素，16 或 256 色）。通常图标文件包含多个尺寸和颜色的图标，为避免覆盖，编辑器将此类图标作为新图标打开。

### 提示
- 右键网格撤销操作，Ctrl+左键拾取颜色。
- 拖动预览图标可捕获图标或在编辑器中移动图像。按住 Ctrl 拖动为捕获并添加。捕获时可查看左上角像素的[颜色](../Other/IDP_COLOR.html)。
- 橡皮擦颜色为透明。
- 绘图时可保持“颜色”对话框打开，作为备用调色板。

## QM 如何使用自定义图标
自 QM 2.3.0.3 起，可为 QM 项目和项目类型设置自定义图标，菜单、对话框等的图标使用方式也有变化。

- **菜单和工具栏**：项目使用与 QM 中显示的相同默认图标，现可为子菜单设置默认图标。
- **ShowDialog、AddTrayIcon、MainWindow**：默认使用启动线程的函数或宏的图标。在 [EXE](IDH_MAKEEXE.html) 中使用 EXE 图标。
- **图标路径存储**：
  - QM 项目的图标路径与项目一起保存在 QM 文件中。
  - QM 项目类型的图标路径保存在注册表中。