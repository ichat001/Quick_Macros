# 等待

**另见**：[wait for](IDP_WAIT_FOR.md)

## 语法

```qm
[wait ]timeS
```

## 参数

- **timeS** - 等待时间（秒）。可为整数（如 `10`）或浮点数（如 `0.1`）。特殊值：

| 值 | 描述 |
|----|------|
| 0 或省略 | 仅处理线程消息队列中可能等待的消息，不受 [opt waitmsg](IDP_OPT.md) 影响。 |
| -1 | 无限等待。 |
| -2 | [自动延迟](IDP_SPE.md)。等待时间等于 [直接调用者](../Other/IDP_FUNCTIONCALL.md) 的宏或函数速度。若无直接调用者，使用默认宏速度。 |

## 备注

等待 **timeS** 秒。

- 若 **timeS** 为纯数字或以数字开头，可省略 `wait` 关键字（见示例）。
- 等待时间精度约为 2 毫秒（0.002 秒）。例如，`wait 0.001` 可能等待 2 毫秒。
- **注意**：若线程有窗口/对话框、使用 COM 事件或某些使用 Windows 消息的 API 函数，应避免使用 wait 命令，或使用短时间（<0.1 秒）。默认情况下，等待时不处理消息，可能导致线程暂时挂起。使用 [opt waitmsg](IDP_OPT.md) 可在等待时处理消息。
- **注意**：不要使用 Windows API 等待函数，因 QM 无法在用户请求时正确结束线程，可能导致内存泄漏或其他问题，且无法应用 opt waitmsg。
- QM 2.4.0：`wait` 使用可警告等待（alertable waiting）。例如，可使用 `QueueUserAPC` 在等待线程中运行函数。

## 示例

```qm
;; 等待 0.5 秒：
wait 0.5
;; 或：
0.5

;; 等待 15 秒，等待时间为变量 wt：
int wt=15
wait wt

;; 等待 2 秒：
double F=0.5
4*F
```