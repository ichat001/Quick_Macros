# 数字与字符串

## 概述

本文介绍 Quick Macros 中使用的字面常量数字和字符串。

## 数字

### 格式
整数支持以下三种格式：
1. **十进制**：如 `47`、`-2000000000`。
2. **十六进制**：如 `0x2F`、`0x88ca6c00`。不支持八进制。
3. **字符**：如 `'a'`、`'.'`、`' '`，值为其 [字符编码](IDP_ASCII.html)，范围为 1-255（ANSI 模式）或 1-127（[Unicode 模式](IDP_UNICODE.html)）。

### 类型
- 0 到 2147483647：`int` 类型。
- 2147483648 到 4294967295：无符号 `int` 类型。
- 更大数字：`long` 类型。
- 可使用后缀更改类型：
  - `I`：`int`（如 `10I`）。
  - `U`：无符号 `int`。
  - `L`：`long`（如 `10L`）。

### 非整数（浮点数）
包含小数点（`.`）或指数（`E` 后接 1-3 位数字）的数字为浮点数，类型为 `double`。示例：
- `5.12`
- `0.975E-5`（即 0.00000975）
- `-2e10`（即 -20000000000）
- 指数表示 10 的幂，如 `1.5E2`（150）、`1.5E-1`（0.15）。
- 必须以数字开头。

## 字符串

### 基本格式
字符串用双引号（`"`）括起，类型为 `lpstr`。示例：`"notepad.exe"`。

### 转义序列
字符串不能包含字面换行或双引号，需使用转义序列：

| 转义序列 | 替换为 |
|----------|--------|
| `[]` | 换行符（回车+换行） |
| `''` | 双引号（`"`） |
| `[digits]` | 指定 [字符编码](IDP_ASCII.html) 的字符（1-255 在 ANSI 模式，1-127 在 [Unicode 模式](IDP_UNICODE.html)），如 `[9]` 替换为制表符。 |

**示例**：
```qm
out "''name''[][65]"
; 输出：
; "name"
; A
```

### 避免转义
- 字面 `[]`：使用 `[91]]`。
- 字面 `''`：使用 `[39]'`。
- 字面 `[digits]`：使用 `[91]digits]`。

可使用 Text 对话框输入纯文本，点击 OK 后自动生成转义后的字符串。

### 注意
- 宏中的转义序列在运行前替换。
- 运行时获取的文本（如从文件、剪贴板）不替换转义序列，需使用 [str.escape](IDP_S_ESCAPE.html)。
- 某些函数（如 [str.format](IDP_S_FORMAT.html)、[str.timeformat](IDP_S_TIMEFORMAT.html)、正则表达式函数）有自己的运行时转义序列。

## 多行字符串

### 使用 `[]`
通过 `[]` 分隔多行字符串：

```qm
"line1[]line2[]line3"
```

### 使用宏文本
通过 [str.getmacro](IDP_S_GETMACRO.html) 获取其他宏的文本：

```qm
str s.getmacro("big string")
```

### 使用注释块
将注释块赋值给 `lpstr` 或 `str` 变量：

```qm
lpstr s=
 multiline
 string
 
out s
```

- 注释块中的转义序列（如 `[]`）不被替换。
- 不能有空行，空行会终止多行字符串。
- 添加换行符可在末尾加仅含空格或分号的行。
- **QM 2.3.0**：注释块行可包含前导制表符（tab），自动移除；早期版本不允许制表符。
- 变量必须为简单形式（如 `s`），不能是 `t.s` 或 `a[i]`，也不能是成员变量。

## Unicode UTF-16 字符串

- 使用 `L` 操作符创建 UTF-16 字符串，字符范围为 1-255（ANSI 模式）或 1-127（Unicode 模式）：

```qm
L"String"
```

- **QM 2.3.0**：可用 [操作符 @](IDP_OPUNARY.html) 在运行时转换为 UTF-16，支持变量：

```qm
@"String"
```

## 字符串中的变量

使用 `F` 操作符并将变量括在 `{}` 中，生成非常量字符串：

```qm
strVariable=F"text{variable1}text{variable2}"
```

或使用注释块形式：

```qm
strVariable=F
 text{variable1}text
 text{variable2}text
```

**更多信息**： [F 字符串](IDP_FSTRING.html)

也可使用字符串函数，如 [str.format](IDP_S_FORMAT.html) 或 [str.from](IDP_S_FROM.html)。

## 命名常量

使用 [def](IDP_DEF.html) 定义命名常量。